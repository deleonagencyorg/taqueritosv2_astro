---
import LazyImage from '../common/LazyImage.astro';
import { getLocale } from '../../i18n/i18n';

interface Props {
  image: string;
  title: string;
  title_down?: string;
  subtitle_down?: string;
  subtitle?: string;
  time?: string;
  id: string;
  textColor?: string;
  iconColor?: string;
  hoverImage?: string;
  difficulty?: string;
  servings?: number;
  rating?: number;
  isMainCard?: boolean;
}

const { 
  image, 
  title, 
  subtitle,
  title_down,
  subtitle_down,
  time = "---", 
  id,
  textColor = 'text-blue-900',
  iconColor = 'text-blue-900',
  hoverImage = image,
  difficulty = "---",
  servings = 0,
  rating = 0,
  isMainCard = false
} = Astro.props;

const currentLocale = getLocale();
const recipeLink = `/${currentLocale}/${currentLocale === 'es' ? 'recetas' : 'recipes'}/${id}`;
---

<a 
  href={recipeLink} 
  class="recipe-card block group relative transition-all duration-500 ease-in-out flex-shrink-0 w-[710px] h-[255px]"
  transition:animate="fade"
>
  <!-- Container principal -->
  <div class="relative overflow-hidden w-[710px] h-[255px] rounded-[2px] shadow-[0_0_30px_rgba(239,68,68,0.5)]"
       style="border: 2px solid; border-image-source: linear-gradient(237.56deg, #FF2D2D 1.39%, #FF9E9B 47.74%, #FF2D2D 100%); border-image-slice: 1;">
    
    <!-- Imagen de fondo -->
    <div class="absolute inset-0">
      <LazyImage
        src={image}
        alt={title}
        class="w-[500px] h-[255px] md:w-full md:h-full object-fill md:object-cover"
        transition:name={`recipe-image-${id}`}
      />
      <!-- Overlay oscuro con gradiente -->
      <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent"></div>
    </div>
    
    <!-- Contenido de texto -->
    <div class="absolute inset-0 flex flex-col justify-end p-8">
      <!-- Título principal -->
      <h3 class="font-title font-black text-white uppercase sm:text-[24px] md:text-[28px] lg:text-[30px] leading-tight tracking-wider" 
          style="text-shadow: 2px 2px 8px rgba(0,0,0,0.8);">
        {title} <br/>
        {title_down}
      </h3>
      
      <!-- Subtítulo/descripción -->
      <p class="text-white text-[28px] font-light leading-relaxed"
         style="text-shadow: 1px 1px 4px rgba(0,0,0,0.8);">
        {subtitle}<br/>
        {subtitle_down}
      </p>
    </div>

    <!-- Efecto de brillo rojo en hover -->
    <div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"
         style="box-shadow: inset 0 0 50px rgba(239, 68, 68, 0.3);"></div>
  </div>
</a>

<style>
  .recipe-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }
  
  .recipe-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 0 40px rgba(255, 45, 45, 0.7);
  }
</style>