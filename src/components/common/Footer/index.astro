---
// src/components/common/Footer/index.astro
import { t, type Locale } from '../../../i18n/i18n';
import { logos } from '../../../config/assets';
import './styles.css';
import Skeleton from './Skeleton.astro';

export interface Props {
  currentLang: Locale;
  loading?: boolean;
}

const { currentLang, loading = false } = Astro.props;

// Obtener textos del footer desde los archivos de traducciÃ³n
const mainText = t('footer.main_text', { namespace: 'common', locale: currentLang });
const description = t('footer.description', { namespace: 'common', locale: currentLang });
const followUs = t('footer.follow_us', { namespace: 'common', locale: currentLang });
const contactUs = t('footer.contact_us', { namespace: 'common', locale: currentLang });
const instagramText = t('footer.instagram_text', { namespace: 'common', locale: currentLang });
const facebookText = t('footer.facebook_text', { namespace: 'common', locale: currentLang });
const email = t('footer.email', { namespace: 'common', locale: currentLang });
const copyrightText = t('footer.copyright', { namespace: 'common', locale: currentLang });

// Social media URLs
const instagramUrl = t('social_media.instagram.url', { namespace: 'common', locale: currentLang });
const facebookUrl = t('social_media.facebook.url', { namespace: 'common', locale: currentLang });

// Obtener el logo especÃ­fico de Zibas desde brands.json
const zibasLogo = 'https://snack.yummiespromociones.com/SnacksyummiesAssets/zibas-logo-3.webp';
---

{loading ? (
  <Skeleton />
) : (
  <footer class="bg-secondary text-white relative overflow-hidden">
    <!-- Chips decorativos -->
    <div class="absolute inset-0 pointer-events-none">
      <!-- Chip izquierdo superior -->
      <img 
        src="https://snack.yummiespromociones.com/snacksyummies/zibas-chip3.webp" 
        alt="Zibas chip" 
        class="absolute top-8 left-8 w-20 h-20 md:w-24 md:h-24 lg:w-32 lg:h-32 transform -rotate-12 opacity-90"
      />
      <!-- Chip derecho superior -->
      <img 
        src="https://snack.yummiespromociones.com/snacksyummies/zibas-chip3.webp" 
        alt="Zibas chip" 
        class="absolute top-24 right-4 w-24 h-24 md:w-32 md:h-32 lg:w-40 lg:h-40 transform rotate-12 opacity-85"
      />
      <!-- Chip centro inferior -->
      <img 
        src="https://snack.yummiespromociones.com/snacksyummies/zibas-chip3.webp" 
        alt="Zibas chip" 
        class="absolute bottom-16 left-1/2 transform -translate-x-1/2 w-16 h-16 md:w-20 md:h-20 rotate-45 opacity-75"
      />
    </div>

    <div class="relative z-10 container mx-auto px-6 py-12 md:py-16">
      <!-- Grid principal -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12 items-start">
        
        <!-- Columna izquierda: Texto principal -->
        <div class="lg:col-span-1">
          <h1 class="font-title text-3xl md:text-4xl lg:text-5xl font-bold mb-4 leading-tight">
            {mainText}
          </h1>
          <p class="font-sans italic text-sm md:text-base leading-relaxed">
            {description}
          </p>
        </div>

        <!-- Columna central: Logo -->
        <div class="lg:col-span-1 flex justify-center items-center">
          <a href={`/${currentLang}/`} class="inline-block">
            <img 
              src={logos.principal.url} 
              alt={logos.principal.alt || 'Zibas Logo'} 
              class="h-16 md:h-20 lg:h-24 w-auto"
            />
          </a>
        </div>

        <!-- Columna derecha: Enlaces -->
        <div class="lg:col-span-1 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-1 gap-6">
          <!-- SÃ­guenos -->
          <div class="text-center lg:text-right">
            <h3 class="font-title text-lg md:text-xl font-bold mb-3">
              {followUs}
            </h3>
            <div class="flex flex-col space-y-1">
              <a 
                href={instagramUrl} 
                target="_blank" 
                rel="noopener noreferrer"
                class="font-sans text-sm md:text-base hover:underline transition-all duration-200 hover:opacity-80 flex items-center justify-center lg:justify-end space-x-2"
              >
                <span>ðŸ“·</span>
                <span>{instagramText}</span>
              </a>
              <a 
                href={facebookUrl} 
                target="_blank" 
                rel="noopener noreferrer"
                class="font-sans text-sm md:text-base hover:underline transition-all duration-200 hover:opacity-80 flex items-center justify-center lg:justify-end space-x-2"
              >
                <span>ðŸ“˜</span>
                <span>{facebookText}</span>
              </a>
            </div>
          </div>

          <!-- ContÃ¡ctanos -->
          <div class="text-center lg:text-right">
            <h3 class="font-title text-lg md:text-xl font-bold mb-3">
              {contactUs}
            </h3>
            <div class="flex flex-col space-y-1">
              <a 
                href={`mailto:${email}`}
                class="font-sans text-sm md:text-base hover:underline transition-all duration-200 hover:opacity-80"
              >
                {email}
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Copyright -->
      <div class="text-center mt-12 pt-6">
        <p class="font-sans text-sm md:text-base">
          {copyrightText}
        </p>
      </div>
    </div>
  </footer>
)}

